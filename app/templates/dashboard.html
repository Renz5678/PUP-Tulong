<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>PUP Tulong - Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/static/css/dashboard.css"/>
</head>
<body>
  <!-- Navigation -->
  <nav class="nav-container">
    <div class="nav-left">
      <div class="nav-item active" data-tab="dashboard">âœª Dashboard</div>
      <div class="nav-item" data-tab="tasks">Task Manager</div>
      <div class="nav-item" data-tab="requests">Personal Requests</div>
      <div class="nav-item" data-tab="ratings">Your Ratings</div>
    </div>
    <div class="nav-right">
      <button class="notification-icon" id="notif-btn">ðŸ””</button>
      <div class="profile-section" id="profile-btn">
        <div class="profile-avatar"></div>
        <span>Profile</span>
      </div>
    </div>
  </nav>

  <!-- Main Content -->
  <main class="main-container">
    <section class="tasks-grid" id="tasks-container">
      <!-- Tasks dynamically injected here -->
    </section>
  </main>

  <!-- JavaScript -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Handle nav selection
      document.querySelectorAll(".nav-item").forEach(item => {
        item.addEventListener("click", () => {
          document.querySelectorAll(".nav-item").forEach(nav => nav.classList.remove("active"));
          item.classList.add("active");
        });
      });

      // Handle profile and notif
      document.getElementById("notif-btn").addEventListener("click", () => alert("Notifications clicked!"));
      document.getElementById("profile-btn").addEventListener("click", () => alert("Profile clicked!"));

      // Load tasks from backend (placeholder)
      fetch("/api/tasks")
        .then(res => res.json())
        .then(data => renderTasks(data))
        .catch(err => console.error("Error fetching tasks:", err));

      // Render tasks
      function renderTasks(tasks) {
  const container = document.getElementById("tasks-container");
  container.innerHTML = ""; // Clear existing

  tasks.forEach(task => {
    const card = document.createElement("div");
    card.className = "task-card";
    card.innerHTML = `
      <div class="task-header">
        <div class="task-avatar">ðŸ‘¤</div>
        <div class="task-info">
          <h3>${task.title}</h3>
          <div class="task-author">
            Posted by: <strong>${task.nickname || "Anonymous"}</strong><br />
            <small>${task.email || ""}</small>
          </div>
        </div>
      </div>
      <div class="task-description">${task.description}</div>
      ${task.topics?.length ? `<ul class="task-list">${task.topics.map(t => `<li>${t}</li>`).join("")}</ul>` : ""}
      ${task.tags?.length ? `<div class="task-tags">${task.tags.map(tag => `<span class="tag">${tag}</span>`).join("")}</div>` : ""}
      <div class="deadline"><span class="deadline-label">Deadline:</span> ${task.deadline}</div>
    `;
    card.addEventListener("click", () => {
      window.location.href = `/tasks/${task.id}`;
    });
    container.appendChild(card);
  });
}
    });
  </script>
</body>
</html>
